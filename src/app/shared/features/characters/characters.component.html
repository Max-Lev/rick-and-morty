<!-- @defer (when isLoadedSignal$()) { -->
 @if(selectedViewSignal$()==='list'){

 
<cdk-virtual-scroll-viewport (scrolledIndexChange)="onScroll()" itemSize="1000" class="list-viewport">

  <table mat-table [dataSource]="charactersSignal$()" class="mat-elevation-z8">

    @for (column of columns; track column) {
    <ng-container [matColumnDef]="column.columnDef">

      <th mat-header-cell *matHeaderCellDef>
        {{column.header}}
      </th>

      <td mat-cell *matCellDef="let row">
        @if(column.columnDef==='id' && !isSelected(row)){
        {{column.cell(row)}}
        }@else if(column.columnDef==='id' && isSelected(row)){
        ( {{column.cell(row)}} )
        }
       @else if (column.columnDef === 'type') {
        {{ column.cell(row) | isEmpty:row['type'] }}
      }
        @else{
        {{column.cell(row)}}
        }
      </td>

    </ng-container>
    }

    <tr mat-header-row *matHeaderRowDef="displayedColumns$();sticky: true"></tr>
    <tr class="lighter" mat-row *matRowDef="let row; columns: displayedColumns$();" (click)="selectedRow(row)"
      [class.row-is-clicked]="isSelected(row)"></tr>

  </table>
</cdk-virtual-scroll-viewport>
<!-- }
@placeholder {
<div>Large component placeholder</div>
} -->
 }@else{
  
  <cdk-virtual-scroll-viewport  (scrolledIndexChange)="onScroll()" itemSize="65" class="grid-view">
  <div *cdkVirtualFor="let character of charactersSignal$()" class="grid-item">
    <app-grid-view [character]="character"></app-grid-view>
    <!-- <hr /> -->
  </div>
</cdk-virtual-scroll-viewport>
 }



